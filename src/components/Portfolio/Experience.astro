---
import { getLangFromUrl, useTranslations } from "@i18n/utils";

interface Props {
  id?: string;
  role?: string;
  institution?: string;
  startDate?: string;
  endDate?: string;
  status?: "finished" | "ongoing";
}

const {
  id = "0",
  role = "Unknown Role",
  institution = "Unknown Institution",
  startDate = "Start date",
  endDate = "End date",
  status = "finished", // "finished" or "ongoing"
}: Props = Astro.props;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const statusStyles = {
  finished: {
    container:
      "text-purple-300 bg-linear-to-r from-purple-800/40 to-purple-600/40 border-purple-500/40 hover:shadow-[0_0_10px_rgba(168,85,247,0.6)]",
    label: t(`exp.${id}.status.finished.label` as any),
  },
  ongoing: {
    container:
      "text-gray-300 bg-linear-to-r from-gray-700/40 to-gray-500/40 border-gray-500/40 hover:shadow-[0_0_10px_rgba(234,179,8,0.6)]",
    label: t(`exp.${id}.status.ongoing.label` as any),
  },
};

const currentStatus = statusStyles[status] || statusStyles.finished;
---

<article
  class="rounded-lg p-4 sm:p-6 flex flex-row-reverse flex-wrap sm:flex-row sm:flex-nowrap items-center gap-4 outline hover:bg-purple-800/10 hover:scale-105 transition-all duration-300"
>
  <div
    class="bg-purple-500 w-16 h-16 rounded-lg flex items-center justify-center shrink-0"
  >
    <span>
      <img src="/svg/brackets.svg" alt="brackets">
    </span>
  </div>
  <div class="flex-1">
    <h3 class="text-xl font-bold stroke-black mb-1">
      {role}
    </h3>
    <p class="text-gray-300 mb-2">{institution}</p>
    <p class="text-gray-400 text-sm mb-2">
      {startDate} - {endDate}
    </p>
  </div>
  <div
    class={`rounded-full px-3 py-1 text-sm font-semibold border shadow-sm transition-all duration-300 ${currentStatus.container}`}
  >
    {currentStatus.label}
  </div>
</article>
