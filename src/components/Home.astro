---
import { getLangFromUrl, useTranslations } from "@i18n/utils";
import { Image } from 'astro:assets';
import appImage from "@assets/img/app-development.png";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const shineText = t('hero.title.line2');
---

<section
  id="home"
  aria-labelledby="hero-heading"
  class="min-h-screen py-12 md:py-16 lg:py-20 grid grid-cols-2 gris-rows-4 lg:grid-cols-3 lg:grid-rows-2 gap-4 text-white font-mono"
>
  <div
    class="col-span-2 row-span-2 lg:col-span-2 lg:row-span-2 flex flex-col justify-center gap-6"
  >
    <h2
      id="hero-heading"
      class="text-4xl min-[480px]:text-5xl lg:text-6xl xl:text-7xl font-bold w-fit"
    >
      <span class="block">{t('hero.title.line1')}</span>
      <span class="text-purple-400 gradient-shine">{t('hero.title.line2')}</span>
    </h2>

    <p class="text-md xl:text-lg text-gray-300 lg:w-7/10">
      {t('hero.description')}
    </p>

    <div class="text-purple-400 flex flex-col gap-4">
      <p class="h-fit text-purple-400 text-lg font-bold">
        {t('hero.cta.connect')}
      </p>

      <nav aria-label="Hero section buttons" class="flex items-center gap-10">
        <a
          class="px-2 min-[480px]:px-6 sm:px-8 py-3 sm:text-lg font-semibold min-w-[132px] sm:min-w-[193px] outline-2 button-3d overflow-hidden flex justify-center"
          href={`/${lang}#contact`}
          aria-label="Contact me"
        >
          {t('hero.button.contact')}
        </a>
        <a
          class="px-2 min-[480px]:px-6 sm:px-8 py-3 sm:text-lg font-semibold min-w-[132px] sm:min-w-[193px] outline-2 button-3d overflow-hidden flex justify-center"
          href={t('hero.button.cv.filepath')}
          aria-label="Download my CV in PDF format"
        >
          {t('hero.button.cv')}
        </a>
      </nav>
    </div>
  </div>

  <figure
    class="hidden lg:col-start-3 lg:row-span-2 lg:flex items-center justify-center"
    aria-labelledby="image-caption"
  >
    <Image src={appImage} alt="Illustration of app development process" width={260} />
    <figcaption id="image-caption" class="sr-only">
      {t('hero.image.alt')}
    </figcaption>
  </figure>
</section>

<style define:vars={{ shineText: `"${shineText}"` }}>
  .gradient-shine {
    position: relative;
    display: inline-block;
  }

  .gradient-shine::before {
    content: var(--shineText);
    position: absolute;
    top: 0;
    left: 0;
    background: linear-gradient(
      120deg,
      transparent 40%,
      rgba(255, 255, 255, 0.8) 50%,
      transparent 60%
    );
    background-size: 200% 100%;
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
    animation: shine 7s linear infinite;
  }

  @keyframes shine {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  .button-3d {
    box-shadow: 10px 10px 0 oklch(71.4% 0.203 305.504);
    transition: all 0.3s ease;
  }

  .button-3d::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: oklch(71.4% 0.203 305.504);
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    z-index: -1;
  }

  .button-3d:hover {
    -webkit-text-stroke: 1px black;
    transform: translate(0);
    box-shadow: 7px 7px 0 oklch(71.4% 0.203 305.504);
  }

  .button-3d:hover::before {
    transform: translateX(0);
  }

  .button-3d:active {
    transform: translate(0);
    box-shadow: 0 0 0 oklch(71.4% 0.203 305.504);
  }
</style>
